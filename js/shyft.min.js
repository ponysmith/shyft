!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.shyft=b(c)}):a.shyft=b(a.jQuery)}(this,function(a){return function(b,c){a.easing.easeOutExpo=function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c};var d={wrapper:"shyft-wrapper",fadewrapper:"shyft-fade-wrapper",canvas:"shyft-canvas",clone:"shyft-clone",item:"shyft-item",navwrapper:"shyft-nav-wrapper",nav:"shyft-nav",navlink:"shyft-navlink",navlink_active:"shyft-navlink-active",navlink_active_secondary:"shyft-navlink-active-secondary",prev:"shyft-prev",next:"shyft-next",disabled:"shyft-disabled"},e={numtoshow:1,numtoscroll:1,offset:null,autoplay:!1,delay:5e3,transition:800,hoverpause:!0,loop:!0,prev:!0,next:!0,touch:!0,prevhtml:"&lsaquo;",nexthtml:"&rsaquo;",nav:!0,prevanim:"slide",nextanim:"slide",changeanim:"fade",navhtml:null,easing:"easeOutExpo",usecss:!0,onload:null,onupdate:null,ondestroy:null,onprechange:null,onpostchange:null,onadd:null,onremove:null,onplay:null,onpause:null,onstart:null,onstop:null,onswipeleft:null,onswiperight:null},f={touch_x_distance:150,touch_y_distance:50,touch_min_time:150},g={},h={init:function(b,c){return g.wrapper=b,dataoptions=h.buildOptions(c),a.extend(e,c,dataoptions),h.build(),j},build:function(b){g.wrapper.addClass(d.wrapper),f.indexes={},f.itemwidth=g.wrapper.width()/e.numtoshow,g.items=g.wrapper.children().wrap("<div>").parent().addClass(d.item),g.fadewrapper=a("<div>").addClass(d.fadewrapper),f.total=g.items.length,f.indexes.min=1,f.indexes.max=f.total-(e.numtoshow-1),g.canvas=g.wrapper.children().wrapAll("<div>").parent().addClass(d.canvas);var c=parseInt(e.offset)||1;f.indexes.current=1>c||c>f.total?1:c,e.touch&&h.enableTouch(),h.buildClones(),h.updateWidths(),h.buildUI(),h.updateButtons(),h.bindEvents(),"function"!=typeof e.onload||b||e.onload(f.total,f.indexes.current),"function"==typeof e.onupdate&&b&&e.onupdate(f.total,f.indexes.current),h.transition("instant"),e.autoplay?j.start():j.stop()},buildOptions:function(){var a={},b=g.wrapper.data();for(var c in b){var d=b[c];switch(!0){case"true"===d.toString().toLowerCase():d=!0;break;case"false"===d.toString().toLowerCase():d=!1;break;case!isNaN(parseFloat(d))&&isFinite(d):d=Number(d);break;default:d=d.toString()}okey=c.toLowerCase().replace(/^shyft/,""),a[okey]=d}return a},buildUI:function(){if(e.prev&&(g.prev=a("<a>").addClass(d.prev).html(e.prevhtml).appendTo(g.wrapper)),e.next&&(g.next=a("<a>").addClass(d.next).html(e.nexthtml).appendTo(g.wrapper)),e.nav){for(g.navwrapper=a("<div>").addClass(d.navwrapper).appendTo(g.wrapper),g.nav=a("<div>").addClass(d.nav).appendTo(g.navwrapper),i=1;i<=f.total;i++){var b=e.navhtml?e.navhtml.replace(/{{i}}/g,i):i;a("<a>").addClass(d.navlink).attr("rel",i).html(b).appendTo(g.nav)}g.navlinks=g.nav.find("."+d.navlink)}},buildClones:function(){f.numclones=e.numtoscroll+1,f.clonewidth=f.itemwidth*f.numclones,g.items.clone().slice(f.total-f.numclones,f.total).addClass(d.clone).prependTo(g.canvas),g.items.clone().slice(0,f.numclones).addClass(d.clone).appendTo(g.canvas),g.clones=g.wrapper.find("."+d.clone)},setIndexes:function(a){switch(f.indexes.old=f.indexes.current,a){case"+":var b=f.indexes.current+e.numtoscroll;!e.loop&&b>f.indexes.max&&(b=f.indexes.max);break;case"-":var b=f.indexes.current-e.numtoscroll;!e.loop&&b<f.indexes.min&&(b=f.indexes.min);break;default:var b=parseInt(a);!e.loop&&b>f.indexes.max&&(b=f.indexes.max)}f.indexes.current=b},enableTouch:function(){g.wrapper.on("touchstart mousedown",h.startTouch),g.wrapper.on("touchend mouseup",h.endTouch),g.wrapper.find("img").on("dragstart",function(){return!1})},disableTouch:function(){g.wrapper.off("touchstart mousedown",h.startTouch),g.wrapper.off("touchend mouseup",h.endTouch)},startTouch:function(a){var b="touchstart"==a.type?a.originalEvent.touches[0]:a;f.start_x=b.clientX,f.start_y=b.clientY,f.start_time=(new Date).getTime()},endTouch:function(a){var b="touchend"==a.type?a.originalEvent.changedTouches[0]:a;f.end_x=b.clientX,f.end_y=b.clientY,f.end_time=(new Date).getTime(),h.checkSwipe()},checkSwipe:function(){if(f.end_time-f.start_time<f.touch_min_time)return!1;var a=Math.abs(f.end_x-f.start_x),b=Math.abs(f.end_y-f.start_y),c=null;a>f.touch_x_distance&&b<f.touch_y_distance&&(c=f.end_x>f.start_x?"right":"left"),null!=c&&j.swipe(c)},enableCssTransitions:function(){var a=e.transition/1e3;g.fadewrapper.css({transition:"opacity "+a+"s"}),g.canvas.css({transition:"left "+a+"s"})},disableCssTransitions:function(){g.fadewrapper.css({transition:""}),g.canvas.css({transition:""})},updateWidths:function(){f.itemwidth=g.wrapper.width()/e.numtoshow,f.clonewidth=f.itemwidth*f.numclones,f.canvaswidth=(2*f.numclones+f.total)*f.itemwidth,g.items.css({width:f.itemwidth}),g.clones.css({width:f.itemwidth}),g.canvas.css({width:f.convaswidth}),h.transition("instant")},updateButtons:function(){if(e.nav){g.navlinks.removeClass(d.navlink_active).removeClass(d.navlink_active_secondary);var a=f.indexes.current-1;for(i=0;i<e.numtoshow;i++)a>=f.total&&(a=0),g.navlinks.eq(a).addClass(0==i?d.navlink_active:d.navlink_active_secondary),a++}e.loop||(e.prev&&(f.prevdisabled=!1,g.prev.removeClass(d.disabled),f.indexes.current==f.indexes.min&&(f.prevdisabled=!0,g.prev.addClass(d.disabled))),e.next&&(f.nextdisabled=!1,g.next.removeClass(d.disabled),f.indexes.current==f.indexes.max&&(f.indexes.current.nextdisabled=!0,g.next.addClass(d.disabled),j.stop())))},prechange:function(a){h.updateButtons(),f.indexes.current<1&&(f.indexes.current=f.indexes.old+f.total,h.transition("instant"),h.setIndexes(a)),f.indexes.current>f.total&&(f.indexes.current=f.indexes.old-f.total,h.transition("instant"),h.setIndexes(a)),"function"==typeof e.onprechange&&e.onprechange(f.indexes.old,f.indexes.current)},postchange:function(){!e.loop&&f.indexes.current>f.indexes.max&&j.stop(),g.fadewrapper.empty().remove(),"function"==typeof e.onpostchange&&e.onpostchange(f.indexes.old,f.indexes.current),f.changing=!1},transition:function(a){var b=0-(f.clonewidth+f.itemwidth*(f.indexes.current-1));switch(a){case"instant":h.disableCssTransitions(),g.canvas.css({left:b}),h.postchange();break;case"fade":var c=f.indexes.current;for(i=0;i<e.numtoshow;i++)c>f.total&&(c=1),g.items.eq(c-1).clone().appendTo(g.fadewrapper),c++;e.usecss?(h.disableCssTransitions(),g.fadewrapper.css({opacity:0}),g.fadewrapper.prependTo(g.wrapper),setTimeout(function(){h.enableCssTransitions(),g.fadewrapper.css({opacity:1}),setTimeout(function(){h.transition("instant")},e.transition)},20)):g.fadewrapper.hide().prependTo(g.wrapper).fadeIn(e.transition,function(){h.transition("instant")});break;default:e.usecss?(h.enableCssTransitions(),g.canvas.css({left:b}),h.postchange()):g.canvas.animate({left:b},e.transition,h.postchange)}},bindEvents:function(){e.prev&&g.prev.on("click",function(a){a.preventDefault(),j.change("-",e.prevanim)}),e.next&&g.next.on("click",function(a){a.preventDefault(),j.change("+",e.nextanim)}),e.nav&&g.nav.on("click","."+d.navlink,function(b){b.preventDefault();var c=a(b.target).closest("."+d.navlink).attr("rel");j.change(c,e.changeanim)}),e.hoverpause&&g.wrapper.on({mouseenter:function(){j.pause()},mouseleave:function(){j.play()}}),a(window).on("resize",h.updateWidths)}},j={destroy:function(a){g.prev.remove(),g.next.remove(),g.nav.remove(),g.clones.remove(),f.total>0?g.items.unwrap("."+d.canvas):g.canvas.remove(),g.items.children().unwrap("."+d.item),g.wrapper.removeClass("shyft-wrapper"),clearInterval(f.interval),h.disableTouch(),"function"!=typeof e.ondestroy||a||e.ondestroy()},update:function(b){e.offset=f.indexes.current,null!=typeof b&&a.extend(e,b),j.destroy(!0),h.build(!0)},add:function(a,b,c){!isNaN(parseFloat(b))&&isFinite(b)&&b>0&&b<=f.total?g.items.eq(b-1).before(a):g.wrapper.append(a),"function"==typeof e.onadd&&e.onadd(a);var d=c?b:f.indexes.current;j.update({offset:d})},remove:function(a){a=a||f.indexes.current;var b=g.items.eq(a-1).remove().children().unwrap("."+d.item);"function"==typeof e.onremove&&e.onremove(b),opts=a>f.indexes.current?{offset:f.indexes.current}:{offset:f.indexes.current-1},f.total--,f.total>0?j.update(opts):j.destroy()},change:function(a,b,c){return h.setIndexes(a),f.indexes.old==f.indexes.current?!1:f.changing?!1:(f.changing=!0,b=b||e.changeanim,c||j.stop(),h.prechange(a),setTimeout(function(){h.transition(b)},0),!0)},swipe:function(a){if("left"!=a&&"right"!=a)return!1;var b="left"==a?j.change("+",e.nextanim,!1):j.change("-",e.prevanim,!1);if(b){var c="onswipe"+a;"function"==typeof e[c]&&e.touch&&e[c](g.wrapper)}},play:function(){return"stop"==f.status||"play"==f.status?!1:(f.status="play",f.interval=setInterval(function(){j.change("+",e.nextanim,!0)},e.delay),void("function"==typeof e.onplay&&e.onplay()))},pause:function(){return"stop"==f.status||"pause"==f.status?!1:(f.status="pause",clearInterval(f.interval),void("function"==typeof e.onpause&&e.onpause()))},start:function(){return"play"==f.status?!1:(f.status="start","function"==typeof e.onstart&&e.onstart(),void j.play())},stop:function(){return"stop"==f.status?!1:(f.status="stop",clearInterval(f.interval),void("function"==typeof e.onstop&&e.onstop()))}};return h.init(b,c)}});