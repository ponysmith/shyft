(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.shyft=b(c))})}else{a.shyft=b(a.jQuery)}}(this,function(a){return function(g,e){a.easing.easeOutExpo=function(l,m,k,o,n){return(m==n)?k+o:o*(-Math.pow(2,-10*m/n)+1)+k};var c={wrapper:"shyft-wrapper",item:"shyft-item",nav:"shyft-nav",navlink:"shyft-navlink",navlink_active:"shyft-navlink-active",prev:"shyft-prev",next:"shyft-next",disabled:"shyft-disabled"};var b={autoplay:false,hoverpause:true,offset:null,delay:5000,loop:true,prev:true,next:true,prevhtml:"&lsaquo;",nexthtml:"&rsaquo;",prevanim:"slide",nextanim:"slide",changeanim:"fade",nav:true,navhtml:null,transition:800,easing:"easeOutExpo",onload:null,onprechange:null,onpostchange:null,onplay:null,onpause:null,onstart:null,onstop:null};var f={indexes:{},interval:null,timeout:null};var j={};var h={init:function(l,k){j.wrapper=l.addClass(c.wrapper);h.buildOptions(k);h.build();h.bindEvents();if(typeof b.onload=="function"){b.onload(f.total,f.indexes.current)}(b.autoplay)?d.start():d.stop();return d},build:function(){j.items=[null];j.navlinks=[null];var k=j.wrapper.children();f.total=k.length;k.each(function(){a(this).wrap('<div class="'+c.item+'" />');var p=a(this).parents("."+c.item);j.items.push(p)});var o=parseInt(b.offset)||1;var m=(o>0&&o<=f.total)?o:1;h.updateIndexes(m);h.inject(j.items[f.indexes.current],"fade",true);if(b.prev){j.prev=a('<a href="" class="'+c.prev+'">'+b.prevhtml+"</a>").appendTo(j.wrapper)}if(b.next){j.next=a('<a href="" class="'+c.next+'">'+b.nexthtml+"</a>").appendTo(j.wrapper)}if(b.nav){j.nav=a('<div class="'+c.nav+'" />').appendTo(j.wrapper);for(i=1;i<=f.total;i++){var l=(b.navhtml)?b.navhtml.replace("{{i}}",i):i;var n=a('<a href="" class="'+c.navlink+'" rel="'+i+'">'+l+"</a>").appendTo(j.nav);j.navlinks.push(n)}}h.updateButtons(f.indexes.current)},buildOptions:function(k){a.extend(b,k);var m=j.wrapper.data();for(var l in m){var n=m[l];switch(true){case (n.toString().toLowerCase()==="true"):n=true;break;case (n.toString().toLowerCase()==="false"):n=false;break;case (!isNaN(parseFloat(n))&&isFinite(n)):n=Number(n);break;default:n=n.toString();break}okey=l.replace(/^shyft-/,"");b[okey]=n}},inject:function(k,n,m){h.updateHeight(k,m);switch(n){case"slide_r2l":j.visible.animate({left:"-100%"},b.transition,b.easing,function(){j.visible.css({left:"-99999px"})});k.css({left:"100%"}).animate({left:0},b.transition,b.easing,function(){h.postchange()});break;case"slide_l2r":j.visible.animate({left:"100%"},b.transition,b.easing,function(){j.visible.css({left:"-99999px"})});k.css({left:"-100%"}).animate({left:0},b.transition,b.easing,function(){h.postchange()});break;default:if(j.visible){var l=j.visible;l.fadeOut(b.transition,function(){l.css({left:"-99999px"});l.show()})}k.hide().css({left:0,"z-index":5}).fadeIn(b.transition,function(){k.css({"z-index":0});h.postchange()});break}},updateHeight:function(m,k){var m=m||f.indexes.current;var l=m.outerHeight();if(k){j.wrapper.css({height:l})}else{j.wrapper.animate({height:l},300,b.animation)}},updateIndexes:function(k){f.indexes.old=f.indexes.current;f.indexes.current=k;f.indexes.prev=((k-1)<1)?(k-1)+f.total:(k-1);f.indexes.next=((k+1)>f.total)?(k+1)-f.total:(k+1)},updateButtons:function(k){if(b.nav){j.nav.find("."+c.navlink).removeClass(c.navlink_active);j.navlinks[k].addClass(c.navlink_active)}if(!b.loop){f.prevdisabled=false;j.prev.removeClass(c.disabled);f.indexes.nextdisabled=false;j.next.removeClass(c.disabled);if(k==1){f.prevdisabled=true;j.prev.addClass(c.disabled)}if(k==f.total){f.indexes.nextdisabled=true;j.next.addClass(c.disabled);d.stop()}}},postchange:function(){j.visible=j.items[f.indexes.current];f.animating=false;if(typeof b.onpostchange==="function"){b.onpostchange(f.indexes.old,f.indexes.current)}},bindEvents:function(){if(b.prev){j.prev.on("click",function(k){k.preventDefault();d.change("-",b.prevanim)})}if(b.next){j.next.on("click",function(k){k.preventDefault();d.change("+",b.nextanim)})}if(b.nav){j.nav.on("click","."+c.navlink,function(l){l.preventDefault();var k=a(l.target).closest("."+c.navlink).attr("rel");d.change(k,b.changeanim)})}if(b.hoverpause){j.wrapper.on({mouseenter:function(){d.pause()},mouseleave:function(){d.play()}})}a(window).on("resize",function(){h.updateHeight(j.visible,true)})},};var d={change:function(m,l,k){if(!k){d.stop()}if(f.animating){return false}f.animating=true;if(m==f.indexes.current){return false}if(l=="slide"){l=(m>f.indexes.current||m=="+")?"slide_r2l":"slide_l2r"}switch(m){case"+":if(f.indexes.nextdisabled){return false}m=f.indexes.next;break;case"-":if(f.prevdisabled){return false}m=f.indexes.prev;break;default:m=parseInt(m);break}l=l||b.changeanim;if(typeof b.onprechange==="function"){b.onprechange(f.indexes.current,m)}h.inject(j.items[m],l);h.updateButtons(m);h.updateIndexes(m)},play:function(){if(f.status=="stop"||f.status=="play"){return false}f.status="play";f.interval=setInterval(function(){d.change("+",b.nextanim,true)},b.delay);if(typeof b.onplay==="function"){b.onplay()}},pause:function(){if(f.status=="stop"||f.status=="pause"){return false}f.status="pause";clearInterval(f.interval);if(typeof b.onpause==="function"){b.onpause()}},start:function(){if(f.status=="play"){return false}f.status="start";if(typeof b.onstart==="function"){b.onstart()}d.play()},stop:function(){if(f.status=="stop"){return false}f.status="stop";clearInterval(f.interval);if(typeof b.onstop==="function"){b.onstop()}}};return h.init(g,e)}}));