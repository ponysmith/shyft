(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.shyft=b(c))})}else{a.shyft=b(a.jQuery)}}(this,function(a){return function(g,e){a.easing.easeOutExpo=function(l,m,k,o,n){return(m==n)?k+o:o*(-Math.pow(2,-10*m/n)+1)+k};var c={wrapper:"shyft-wrapper",fadewrapper:"shyft-fade-wrapper",canvas:"shyft-canvas",clone:"shyft-clone",item:"shyft-item",nav:"shyft-nav",navlink:"shyft-navlink",navlink_active:"shyft-navlink-active",navlink_active_secondary:"shyft-navlink-active-secondary",prev:"shyft-prev",next:"shyft-next",disabled:"shyft-disabled"};var b={numtoshow:1,numtoscroll:1,offset:null,autoplay:false,delay:5000,transition:800,hoverpause:true,loop:true,prev:true,next:true,prevhtml:"&lsaquo;",nexthtml:"&rsaquo;",nav:true,prevanim:"slide",nextanim:"slide",changeanim:"fade",navhtml:null,easing:"easeOutExpo",onload:null,onupdate:null,ondestroy:null,onprechange:null,onpostchange:null,onadd:null,onremove:null,onplay:null,onpause:null,onstart:null,onstop:null};var f={};var j={};var h={init:function(l,k){j.wrapper=l;dataoptions=h.buildOptions(k);a.extend(b,k,dataoptions);h.build();return d},build:function(l){j.wrapper.addClass(c.wrapper);f.indexes={};f.itemwidth=j.wrapper.width()/b.numtoshow;j.items=j.wrapper.children().wrap("<div>").parent().addClass(c.item);j.fadewrapper=a("<div>").addClass(c.fadewrapper);f.total=j.items.length;f.indexes.min=1;f.indexes.max=f.total-(b.numtoshow-1);j.canvas=j.wrapper.children().wrapAll("<div>").parent().addClass(c.canvas);var k=parseInt(b.offset)||1;f.indexes.current=(k<1||k>f.total)?1:k;h.buildClones();h.updateWidths();h.buildUI();h.updateButtons();h.bindEvents();if(typeof b.onload=="function"&&!l){b.onload(f.total,f.indexes.current)}if(typeof b.onupdate=="function"&&l){b.onupdate(f.total,f.indexes.current)}h.transition("instant");(b.autoplay)?d.start():d.stop()},buildOptions:function(k){var p={};var m=j.wrapper.data();for(var l in m){var n=m[l];switch(true){case (n.toString().toLowerCase()==="true"):n=true;break;case (n.toString().toLowerCase()==="false"):n=false;break;case (!isNaN(parseFloat(n))&&isFinite(n)):n=Number(n);break;default:n=n.toString();break}okey=l.toLowerCase().replace(/^shyft/,"");p[okey]=n}return p},buildUI:function(){if(b.prev){j.prev=a("<a>").addClass(c.prev).html(b.prevhtml).appendTo(j.wrapper)}if(b.next){j.next=a("<a>").addClass(c.next).html(b.nexthtml).appendTo(j.wrapper)}if(b.nav){j.nav=a("<div>").addClass(c.nav).appendTo(j.wrapper);for(i=1;i<=f.total;i++){var k=(b.navhtml)?b.navhtml.replace(/{{i}}/g,i):i;var l=a("<a>").addClass(c.navlink).attr("rel",i).html(k).appendTo(j.nav)}j.navlinks=j.nav.find("."+c.navlink)}},buildClones:function(){f.numclones=b.numtoscroll+1;f.clonewidth=(f.itemwidth*f.numclones);j.items.clone().slice(f.total-f.numclones,f.total).addClass(c.clone).prependTo(j.canvas);j.items.clone().slice(0,f.numclones).addClass(c.clone).appendTo(j.canvas);j.clones=j.wrapper.find("."+c.clone)},setIndexes:function(l){f.indexes.old=f.indexes.current;switch(l){case"+":var k=f.indexes.current+b.numtoscroll;if(!b.loop&&k>f.indexes.max){k=f.indexes.max}break;case"-":var k=f.indexes.current-b.numtoscroll;if(!b.loop&&k<f.indexes.min){k=f.indexes.min}break;default:var k=parseInt(l);if(!b.loop&&k>f.indexes.max){k=f.indexes.max}break}f.indexes.current=k},updateWidths:function(){f.itemwidth=j.wrapper.width()/b.numtoshow;f.clonewidth=f.itemwidth*f.numclones;f.canvaswidth=(2*f.numclones+f.total)*f.itemwidth;j.items.css({width:f.itemwidth});j.clones.css({width:f.itemwidth});j.canvas.css({width:f.convaswidth});h.transition("instant")},updateButtons:function(){if(b.nav){j.navlinks.removeClass(c.navlink_active).removeClass(c.navlink_active_secondary);var k=f.indexes.current-1;for(i=0;i<b.numtoshow;i++){if(k>=f.total){k=0}(i==0)?j.navlinks.eq(k).addClass(c.navlink_active):j.navlinks.eq(k).addClass(c.navlink_active_secondary);k++}}if(!b.loop){if(b.prev){f.prevdisabled=false;j.prev.removeClass(c.disabled);if(f.indexes.current==f.indexes.min){f.prevdisabled=true;j.prev.addClass(c.disabled)}}if(b.next){f.nextdisabled=false;j.next.removeClass(c.disabled);if(f.indexes.current==f.indexes.max){f.indexes.current.nextdisabled=true;j.next.addClass(c.disabled);d.stop()}}}},prechange:function(k){h.setIndexes(k);h.updateButtons();if(f.indexes.current<1){f.indexes.current=f.indexes.old+f.total;h.transition("instant");h.setIndexes(k)}if(f.indexes.current>f.total){f.indexes.current=f.indexes.old-f.total;h.transition("instant");h.setIndexes(k)}if(typeof b.onprechange=="function"){b.onprechange(f.indexes.old,f.indexes.current)}},postchange:function(){if(!b.loop&&f.indexes.current>f.indexes.max){d.stop()}j.fadewrapper.empty().remove();if(typeof b.onpostchange=="function"){b.onpostchange(f.indexes.old,f.indexes.current)}f.changing=false},transition:function(l){var m=(0-(f.clonewidth+(f.itemwidth*(f.indexes.current-1))));switch(l){case"instant":j.canvas.css({left:m});h.postchange();break;case"fade":var k=f.indexes.current;for(i=0;i<b.numtoshow;i++){if(k>f.total){k=1}j.items.eq(k-1).clone().appendTo(j.fadewrapper);k++}j.fadewrapper.hide().prependTo(j.wrapper).fadeIn(b.transition,function(){h.transition("instant")});break;default:j.canvas.animate({left:m},b.transition,h.postchange);break}},bindEvents:function(){if(b.prev){j.prev.on("click",function(k){k.preventDefault();d.change("-",b.prevanim)})}if(b.next){j.next.on("click",function(k){k.preventDefault();d.change("+",b.nextanim)})}if(b.nav){j.nav.on("click","."+c.navlink,function(k){k.preventDefault();var l=a(k.target).closest("."+c.navlink).attr("rel");d.change(l,b.changeanim)})}if(b.hoverpause){j.wrapper.on({mouseenter:function(){d.pause()},mouseleave:function(){d.play()}})}a(window).on("resize",h.updateWidths)},};var d={destroy:function(k){j.prev.remove();j.next.remove();j.nav.remove();j.clones.remove();if(f.total>0){j.items.unwrap("."+c.canvas)}else{j.canvas.remove()}j.items.children().unwrap("."+c.item);j.wrapper.removeClass("shyft-wrapper");clearInterval(f.interval);if(typeof b.ondestroy=="function"&&!k){b.ondestroy()}},update:function(k){b.offset=f.indexes.current;if(typeof k!=null){a.extend(b,k)}d.destroy(true);h.build(true)},add:function(l,n,m){(!isNaN(parseFloat(n))&&isFinite(n)&&n>0&&n<=f.total)?j.items.eq(n-1).before(l):j.wrapper.append(l);if(typeof b.onadd=="function"){b.onadd(l)}var k=(m)?n:f.indexes.current;d.update({offset:k})},remove:function(k){k=k||f.indexes.current;var l=j.items.eq(k-1).remove().children().unwrap("."+c.item);if(typeof b.onremove==="function"){b.onremove(l)}opts=(k>f.indexes.current)?{offset:f.indexes.current}:{offset:f.indexes.current-1};f.total--;if(f.total>0){d.update(opts)}else{d.destroy()}},change:function(m,l,k){if(f.changing){return false}f.changing=true;l=l||b.changeanim;if(!k){d.stop()}h.prechange(m);if(f.indexes.old==f.indexes.current){return}h.transition(l)},play:function(){if(f.status=="stop"||f.status=="play"){return false}f.status="play";f.interval=setInterval(function(){d.change("+",b.nextanim,true)},b.delay);if(typeof b.onplay==="function"){b.onplay()}},pause:function(){if(f.status=="stop"||f.status=="pause"){return false}f.status="pause";clearInterval(f.interval);if(typeof b.onpause==="function"){b.onpause()}},start:function(){if(f.status=="play"){return false}f.status="start";if(typeof b.onstart==="function"){b.onstart()}d.play()},stop:function(){if(f.status=="stop"){return false}f.status="stop";clearInterval(f.interval);if(typeof b.onstop==="function"){b.onstop()}}};return h.init(g,e)}}));